<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="uu.formlibrary">
<head>
  <metal:block fill-slot="javascript_head_slot">
<script type="text/javascript">
jQuery(document).ready(function () {
    //reset zebra-striping "even" classnames when row count changes
    // visual: zebra-striping, works across browsers by marking class
    jq('table.queries tr:nth-child(1n)').removeClass('even');
    jq('table.queries tr:nth-child(2n)').addClass('even');
});
</script>
  </metal:block>
  <metal:block fill-slot="style_slot">
<link rel="stylesheet" media="all" href="++resource++uu.formlibrary.search/formsearch.css" tal:attributes="href string:${view/portalurl}/++resource++uu.formlibrary.search/formsearch.css" type="text/css" />
<style>
table.queries td { color: #666; }
table.queries td.display-queryop { font-size:100%; color:#68b; text-align:left; padding-right:0.1em; }
table.queries { border-bottom:1px solid #666; margin-top:0.8em; }
.comparator-symbol { color:#ccc; display:block; float:left; margin-right:0.1em; width:1.2em; font-size:130%; font-weight:bold; }
</style>
  </metal:block>
</head>
<body>
 <div metal:fill-slot="header">
  <h5>RECORD FILTER</h5>
 </div>
 <div metal:fill-slot="content-core" tal:define="operator context/operator">
  <hr />
  <table class="queries">
   <tr class="headings">
    <th class="display-queryop">&nbsp;</th>
    <th>Field</th>
    <th>Comparison operation</th>
    <th>Query value</th>
   </tr>
   <tr tal:repeat="query view/queries">
    <td class="display-queryop">
      <span tal:condition="repeat/query/index" tal:content="operator">AND/OR</span>
    </td>
    <td tal:content="query/field/title">FIELDNAME</td>
    <td>
        <span class="comparator-symbol" tal:content="python: view.comparator_symbol(query.comparator)">*</span>
        <span tal:content="python: view.comparator_title(query.comparator)">COMPARE</span>
    </td>
    <td tal:content="query/value" tal:condition="python:not isinstance(query.value, list)">VALUE</td>
    <td tal:define="selected query/value"
        tal:condition="python:isinstance(query.value, list)">
        <ul>
            <li tal:repeat="element selected"><span tal:replace="element"></span></li>
        </ul>
    </td>
   </tr>
  </table>
  <div><label>Operator used across fields: </label><span tal:content="operator">OP</span></div>
  <tal:block define="used_by view/used_by">
   <div tal:condition="used_by">
    <h4>This filter is also used by:</h4>
    <ul>
      <li tal:repeat="brain used_by">
        <img src="" tal:attributes="src brain/getIcon; alt brain/Type" />
        <a href="" tal:attributes="href brain/getURL" target="_blank">
          <span tal:content="string:${brain/Title} (${brain/Type})">TITLE</span> 
        </a>
      </li>
    </ul>
   </div>
  </tal:block>
 </div>
</body>
</html>
